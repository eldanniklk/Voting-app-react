{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{ethers}from\"ethers\";import VotingContract from\"./Voting.json\";function App(){const[elections,setElections]=useState([]);const[account,setAccount]=useState(\"\");const[votingContract,setVotingContract]=useState(null);useEffect(()=>{loadBlockchainData();},[]);const loadBlockchainData=async()=>{if(window.ethereum){const provider=new ethers.providers.Web3Provider(window.ethereum);const signer=provider.getSigner();const contractAddress=\"0xYourContractAddress\";// Dirección del contrato desplegado\nconst contract=new ethers.Contract(contractAddress,VotingContract.abi,signer);setVotingContract(contract);const accounts=await window.ethereum.request({method:\"eth_requestAccounts\"});setAccount(accounts[0]);const electionsCount=await contract.electionsCount();let electionsArray=[];for(let i=1;i<=electionsCount;i++){const election=await contract.elections(i);electionsArray.push(election);}setElections(electionsArray);}};const createElection=async name=>{await votingContract.createElection(name);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Voting DApp\"),/*#__PURE__*/React.createElement(\"p\",null,\"Account: \",account),/*#__PURE__*/React.createElement(\"h2\",null,\"Create New Election\"),/*#__PURE__*/React.createElement(\"button\",{onClick:()=>createElection(\"My Election\")},\"Create Election\"),/*#__PURE__*/React.createElement(\"h2\",null,\"Existing Elections\"),elections.map((election,index)=>/*#__PURE__*/React.createElement(\"div\",{key:index},/*#__PURE__*/React.createElement(\"p\",null,\"Election Name: \",election.name))));return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Voting DApp\"));}export default App;","map":{"version":3,"names":["React","useState","useEffect","ethers","VotingContract","App","elections","setElections","account","setAccount","votingContract","setVotingContract","loadBlockchainData","window","ethereum","provider","providers","Web3Provider","signer","getSigner","contractAddress","contract","Contract","abi","accounts","request","method","electionsCount","electionsArray","i","election","push","createElection","name","createElement","onClick","map","index","key","className"],"sources":["/home/eldanniklk/voting-dapp/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport VotingContract from \"./Voting.json\";\n\nfunction App() {\n  const [elections, setElections] = useState([]);\n  const [account, setAccount] = useState(\"\");\n  const [votingContract, setVotingContract] = useState(null);\n\n  useEffect(() => {\n    loadBlockchainData();\n  }, []);\n  \n\n  const loadBlockchainData = async () => {\n    if (window.ethereum) {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const contractAddress = \"0xYourContractAddress\"; // Dirección del contrato desplegado\n      const contract = new ethers.Contract(contractAddress, VotingContract.abi, signer);\n\n      setVotingContract(contract);\n\n      const accounts = await window.ethereum.request({ method: \"eth_requestAccounts\" });\n      setAccount(accounts[0]);\n\n      const electionsCount = await contract.electionsCount();\n      let electionsArray = [];\n      for (let i = 1; i <= electionsCount; i++) {\n        const election = await contract.elections(i);\n        electionsArray.push(election);\n      }\n      setElections(electionsArray);\n    }\n  };\n\n  const createElection = async (name) => {\n    await votingContract.createElection(name);\n  };\n\n  return (\n    <div>\n      <h1>Voting DApp</h1>\n      <p>Account: {account}</p>\n      <h2>Create New Election</h2>\n      <button onClick={() => createElection(\"My Election\")}>Create Election</button>\n      <h2>Existing Elections</h2>\n      {elections.map((election, index) => (\n        <div key={index}>\n          <p>Election Name: {election.name}</p>\n        </div>\n      ))}\n    </div>\n  );\n  return (\n    <div className=\"App\">\n      <h1>Voting DApp</h1>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,MAAM,KAAQ,QAAQ,CAC/B,MAAO,CAAAC,cAAc,KAAM,eAAe,CAE1C,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGN,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACO,OAAO,CAAEC,UAAU,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACS,cAAc,CAAEC,iBAAiB,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAE1DC,SAAS,CAAC,IAAM,CACdU,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAGN,KAAM,CAAAA,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAIC,MAAM,CAACC,QAAQ,CAAE,CACnB,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAZ,MAAM,CAACa,SAAS,CAACC,YAAY,CAACJ,MAAM,CAACC,QAAQ,CAAC,CACnE,KAAM,CAAAI,MAAM,CAAGH,QAAQ,CAACI,SAAS,CAAC,CAAC,CACnC,KAAM,CAAAC,eAAe,CAAG,uBAAuB,CAAE;AACjD,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAlB,MAAM,CAACmB,QAAQ,CAACF,eAAe,CAAEhB,cAAc,CAACmB,GAAG,CAAEL,MAAM,CAAC,CAEjFP,iBAAiB,CAACU,QAAQ,CAAC,CAE3B,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAX,MAAM,CAACC,QAAQ,CAACW,OAAO,CAAC,CAAEC,MAAM,CAAE,qBAAsB,CAAC,CAAC,CACjFjB,UAAU,CAACe,QAAQ,CAAC,CAAC,CAAC,CAAC,CAEvB,KAAM,CAAAG,cAAc,CAAG,KAAM,CAAAN,QAAQ,CAACM,cAAc,CAAC,CAAC,CACtD,GAAI,CAAAC,cAAc,CAAG,EAAE,CACvB,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,EAAIF,cAAc,CAAEE,CAAC,EAAE,CAAE,CACxC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAT,QAAQ,CAACf,SAAS,CAACuB,CAAC,CAAC,CAC5CD,cAAc,CAACG,IAAI,CAACD,QAAQ,CAAC,CAC/B,CACAvB,YAAY,CAACqB,cAAc,CAAC,CAC9B,CACF,CAAC,CAED,KAAM,CAAAI,cAAc,CAAG,KAAO,CAAAC,IAAI,EAAK,CACrC,KAAM,CAAAvB,cAAc,CAACsB,cAAc,CAACC,IAAI,CAAC,CAC3C,CAAC,CAED,mBACEjC,KAAA,CAAAkC,aAAA,yBACElC,KAAA,CAAAkC,aAAA,WAAI,aAAe,CAAC,cACpBlC,KAAA,CAAAkC,aAAA,UAAG,WAAS,CAAC1B,OAAW,CAAC,cACzBR,KAAA,CAAAkC,aAAA,WAAI,qBAAuB,CAAC,cAC5BlC,KAAA,CAAAkC,aAAA,WAAQC,OAAO,CAAEA,CAAA,GAAMH,cAAc,CAAC,aAAa,CAAE,EAAC,iBAAuB,CAAC,cAC9EhC,KAAA,CAAAkC,aAAA,WAAI,oBAAsB,CAAC,CAC1B5B,SAAS,CAAC8B,GAAG,CAAC,CAACN,QAAQ,CAAEO,KAAK,gBAC7BrC,KAAA,CAAAkC,aAAA,QAAKI,GAAG,CAAED,KAAM,eACdrC,KAAA,CAAAkC,aAAA,UAAG,iBAAe,CAACJ,QAAQ,CAACG,IAAQ,CACjC,CACN,CACE,CAAC,CAER,mBACEjC,KAAA,CAAAkC,aAAA,QAAKK,SAAS,CAAC,KAAK,eAClBvC,KAAA,CAAAkC,aAAA,WAAI,aAAe,CAChB,CAAC,CAEV,CAEA,cAAe,CAAA7B,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module"}